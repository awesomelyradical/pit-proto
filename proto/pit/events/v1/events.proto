syntax = "proto3";
package pit.events.v1;

import "google/protobuf/timestamp.proto";

message KeyValue { string key = 1; int64 value = 2; }  // value in micros if currency

message TradeFillEvent {
  string event_id = 1;
  google.protobuf.Timestamp ts = 2;
  string tenant_id = 3;
  string series_id = 4;
  string cell_id = 5;

  string venue = 6;
  string instrument = 7;
  string order_id = 8;
  string strategy_ref = 9;

  int64 qty = 10;                 // quantity (signed)
  int64 price_micros = 11;        // price in USD micros
  int64 fee_usd_micros = 12;      // fee in USD micros
  int64 slippage_bps = 13;        // basis points (can stay int)
  int64 notional_usd_micros = 14; // notional in USD micros
}

message NAVUpdateEvent {
  string event_id = 1;
  google.protobuf.Timestamp ts = 2;
  string tenant_id = 3;
  string series_id = 4;
  string cell_id = 5;

  int64 nav_usd_micros = 6;           // NAV in USD micros
  int64 cash_liquid_usd_micros = 7;   // cash in USD micros
  int64 unrealized_pnl_usd_micros = 8; // unrealized PnL in USD micros
  int64 realized_pnl_usd_micros = 9;  // realized PnL in USD micros
}

message ExposureSnapshotEvent {
  string event_id = 1;
  google.protobuf.Timestamp ts = 2;
  string tenant_id = 3;
  string series_id = 4;
  string cell_id = 5;

  int64 gross_exposure_usd_micros = 6; // gross exposure in USD micros
  int64 net_exposure_usd_micros = 7;   // net exposure in USD micros

  repeated KeyValue factor_exposure = 8;
  repeated KeyValue venue_conc_pct = 9;
  repeated KeyValue liq_metrics = 10;
}
