syntax = "proto3";
package pit.envelope.v1;

import "google/protobuf/timestamp.proto";

message EventEnvelope {
  string event_id = 1;
  google.protobuf.Timestamp ts = 2;

  // Routing + multi-tenant safety invariants
  string key = 3;      // "t/{tenant}/s/{series}/c/{cell}" or "t/{tenant}/s/{series}"
  string tenant = 4;
  string series = 5;
  string cell = 6;     // empty for series-scoped events

  // Provenance
  string producer = 7;     // "nav-consumer@0.1.3" etc
  string payload_type = 8; // "pit.events.v1.TradeFillEvent"

  bytes payload = 9;       // raw protobuf bytes for payload_type
  string payload_sha256 = 10; // optional but recommended
}

// And in each domain topic, the enveloped payload_type is what differentiates message kinds. (You can keep one message-per-topic too; envelope still helps policy enforcement and auditing.)